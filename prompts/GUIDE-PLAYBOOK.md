# Script Kit Playbook (Condensed)

Generated by scripts/condense-generation-assets.mjs. Each topic keeps the first summary and the first example snippet.

## Running a Script
> Press cmd+; (or ctrl+; on Windows) to open the Script Kit prompt. Search for the script you want to run and press enter to run it.

## Debugging a Script
> With the prompt open, run a script with cmd+enter (ctrl+enter on Windows) to launch the script in debug mode. An inspector will appear alongside the script, allowing you to inspect current values and step through it line by line. Use the debugger statement anywhere in your script to create a breakpoint where your script will pause. (When running the script normally, the debugger statement is simply ignored.)
```js
let response = await get("https://api.github.com/repos/johnlindquist/kit")

// The inspector will pause your script so you can examine the value of "response""
debugger
```

## Create a Script
> Keep your scripts in ~/.kenv/scripts ("kenv" stands for "Kit Environment").

## Naming a Script
> The file name of the script is lowercased and dashed like hello-world.js by convention. You can add an additional //Name: Hello World to the top of your script for a more friendly name to appear when searching in the prompt.
```js
//Name: Hello World
```

## // Shortcut Metadata
> Use the // Shortcut metadata to add a global keyboard shortcut to any script
```js
// Shortcut: cmd shift j

import "@johnlindquist/kit"

say(`You pressed command shift j`)
```

## Input Text with `await arg()`
> The simplest form of input you can accept from a user is an arg()
```js
// Name: Input Text

import "@johnlindquist/kit"

let name = await arg("Enter your name")

await div(md(`Hello, ${name}`))
```

## Select From a List of Strings
```js
// Name: Select From a List

import "@johnlindquist/kit"

let fruit = await arg("Pick a fruit", [
  "Apple",
  "Banana",
  "Cherry",
```

## Select From a List of Objects
```js
// Name: Select From a List of Objects

import "@johnlindquist/kit"

let { size, weight } = await arg("Select a Fruit", [
  {
    name: "Apple",
    description: "A shiny red fruit",
```

## Select from a Dynamic List
```js
// Name: Select From a Dynamic List

import "@johnlindquist/kit"

await arg("Select a Star Wars Character", async () => {
  // Get a list of people from the swapi api
  let response = await get("https://swapi.dev/api/people/")
```

## Display a Preview When Focusing a Choice
```js
// Name: Display a Preview When Focusing a Choice

import "@johnlindquist/kit"

let heights = [320, 480, 640]
let choices = heights.map(h => {
  return {
    name: `Kitten height: ${h}`,
```

## Display HTML Beneath the Input
> If the second argument to arg() is a string, it will be displayed beneath the input as HTML.
```js
// Just a string
await arg(
  "Select a fruit",
  md(`I recommend typing "Apple"`) // "md" converts strings to HTML
)
```

## This is just information
> Usually to help you make a choice

## Display Only HTML
> Use await div('') to display HTML.
```js
// Name: Display HTML

import "@johnlindquist/kit"

await div(`<h1>Hello World</h1>`)
```

## Display HTML with CSS
> Script Kit bundles Tailwind CSS.
```js
// Name: Display HTML with CSS

import "@johnlindquist/kit"

await div(
  `<h1 class="p-10 text-4xl text-center">Hello World</h1>`
)
```

## Display Markdown
> The md() function will convert Markdown into HTML that you can pass into div. It will also add the default Tailwind styles so you won't have to think about formatting.
```js
// Name: Display Markdown

import "@johnlindquist/kit"

let html = md(`# Hello World`)

await div(html)
```

## Create a Widget
> Use the widget method to spawn a new, persisting window that is disconnected from the script.
```js
await widget(`
<div class="bg-black text-white h-screen p-5">
    Hello there!
<div>

`)
```

## Set Options using Flags
> To add an options menu to your choices, you must provide a flags object. If one of the keyboard shortcuts are hit, or the user selects the option, then the flag global will have the matching key from your flags set to true:
```js
let urls = [
  "https://scriptkit.com",
  "https://egghead.io",
  "https://johnlindquist.com",
]

let flags = {
  open: {
```

## Store Simple JSON data with db
> The db helpers reads/writes to json files in the ~/.kenv/db directory. It's meant as a simple wrapper around common json operations.
```js
// Name: Database Read/Write Example
// Description: Add/remove items from a list of fruit

let fruitDb = await db(["apple", "banana", "orange"])

// This will keep prompting until you hit Escape
while (true) {
  let fruitToAdd = await arg(
```

## Watch Files to Trigger Scripts
> The // Watch metadata enables you to watch for changes to a file on your system.
```js
// Name: Speak File
// Watch: ~/speak.txt

import "@johnlindquist/kit"

let speakPath = home("speak.txt")

try {
```

## Run Shell Commands
> Script Kit bundles zx as the global $
```js
await $`cat package.json | grep name`

let branch = await $`git branch --show-current`
await $`dep deploy --branch=${branch}`

await Promise.all([
  $`sleep 1; echo 1`,
  $`sleep 2; echo 2`,
```

## Make HTTP Requests with get, put, post, and del
> The get, post, put, and del methods use the axios API
```js
// Name: Get Example

import "@johnlindquist/kit"

let response = await get(
  "https://scriptkit.com/api/get-example"
)
```

## Download Files
> Use download to download a file from a url:
```js
// Name: Download a File

import "@johnlindquist/kit"

let url = "https://www.scriptkit.com/assets/logo.png"
let buffer = await download(url)

let fileName = path.basename(url)
```

## Read a Text File
> You can use readFile to read a text file from your system:
```js
// Name: Read a Text File

import "@johnlindquist/kit"

// Download a readme for the sake of the example
let fileUrl = `https://raw.githubusercontent.com/johnlindquist/kit/main/README.md`
let filePath = home("README.md")
let buffer = await download(fileUrl)
```

## Create a Text File
```js
// Name: Create a Text File

import "@johnlindquist/kit"

let filePath = await path() // Select a path that doesn't exist

let exists = await pathExists(filePath)
```

## Live Edit a Text File
```js
// Name: Update a Text File

import "@johnlindquist/kit"

let filePath = home(`my-notes.md`)

// `ensureReadFile` will create the file with the content
// if it doesn't exist
```

## Run a Script on a Schedule
> Use cron syntax to run scripts on a schedule. The following example will show a notification to stand up and stretch every 15 minutes.
```js
// Name: Stand Up and Stretch
// Schedule: */15 * * * *

import "@johnlindquist/kit"

notify(`Stand up and stretch`)
```

## Environment Variables
> The env helper will read environment variables from ~/.kenv/.env. If the variable doesn't exist, it will prompt you to create it.
```js
// Name: Env Example

import "@johnlindquist/kit"

let KEY = await env("MY_KEY")

await div(md(`You loaded ${KEY} from ~/.kenv/.env`))
```

## Environment Variable Async Prompt
> If you pass a function as the second argument to env, it will only be called if the variable doesn't exist. This allows you to set Enviroment Variables from a list, an API, or any other data source.
```js
// Name: Choose an Environment Variable

import "@johnlindquist/kit"

let MY_API_USER = await env("MY_API_USER", async () => {
  return await arg("Select a user for your API", [
    "John",
    "Mindy",
```

## Share as a Gist, Link, URL, or Markdown
> The Script Kit main window also includes many other share options:
- Share as Gist <kbd>cmd+g</kbd>: Creates as Gist of the selected script, then copies the URL to the clipboard
- Share as Link <kbd>opt+s</kbd>: Creates a private installable kit://link to the selected script, then copies the URL to the clipboard. These links are very long as they encode the entire script into the URL.
- Share as URL <kbd>opt+u</kbd>: Creates a Gist of the selected script, then copies an installable public URL to the clipboard

## Get Featured
> Featured scripts are displayed in:
- The Community tab of the Script Kit main window
- On the Community Scripts page

## Experiment with Data in Chrome DevTools
```js
// Name: Play with Data in Chrome DevTools

import "@johnlindquist/kit"

// Will open a standalone Chrome DevTools window
// The object passed in will be displayed
// You can access the object using `x`, e.g., `x.message` will be `Hello world`
dev({
```

## // Shortcode Metadata
> A shortcode allows you quickly run a script without needing to search for it.
```js
// Shortcode: oi

import "@johnlindquist/kit"

say(`You pressed option i`)
```

## Quick Submit from Hint
> A common pattern from Terminal is to quickly submit a script from a hint. Using a bracket around a single character will submit that character when pressed.
```js
import "@johnlindquist/kit"

let value = await arg({
  placeholder: "Continue?",
  hint: `Another [y]/[n]`,
})

if (value === "y") {
```

## Quick Submit from Choice
> If you need to provide a little more information to the user, use a choice instead of a hint. This allows you to provide a full value that will be submitted instead of just the single letter.
```js
import "@johnlindquist/kit"

let value = await arg("Select a food", [
  {
    name: "[a]pple",
    value: "apple",
  },
  {
```

## Run Scripts from Other Apps
> Are you a fan of one of these amazing tools? Keyboard Maestro
- Keyboard Maestro
- Better Touch Tool
- Karabiner
```bash
~/.kit/kar center-app
```

## Select a Path
```js
// Name: Select a Path

import "@johnlindquist/kit"

let filePath = await path()

await div(md(`You selected ${filePath}`))
```

## Select a Path with Options
```js
// Name: Select a Path with Options

import "@johnlindquist/kit"

await path({
  hint: `Select a path containing JS files`,
  onlyDirs: true,
  onChoiceFocus: async (input, { focused }) => {
```

## Select from Finder Prompts
```js
// Name: Select from Finder Prompt

import "@johnlindquist/kit"

let filePath = await selectFile()

let folderPath = await selectFolder()
```

## Built-in Terminal
> > The shell defaults to zsh. You can change your shell by setting the KIT_SHELL environment variable in the ~/kenv/.env, but most of the testing has been done with zsh.
```js
// Name: Run Commands in the Terminal

import "@johnlindquist/kit"

await term({
  //defaults to home dir
  cwd: `~/.kenv/scripts`,
  command: `ls`,
```

## Built-in Editor
> Script Kit ships with a built-in version of the Monaco editor. Use await editor() to switch to the editor prompt.
```js
// Name: Editor Example

import "@johnlindquist/kit"

let result = await editor()

await div(md(result))
```

## Load Text in the Editor
```js
// Name: Load Text Into the Editor

import "@johnlindquist/kit"

let { data } = await get(
  `https://raw.githubusercontent.com/johnlindquist/kit/main/README.md`
)
```

## Add ~/.kit/bin to $PATH
> > This is similar to VS Code's "Add code to path"
```bash
~/.kit/bin/kit
```

## Required Permissions for Features
> Kit.app requires accessibility permission for the following reasons: Watch user input to trigger Snippets and Clipboard History
- Watch user input to trigger Snippets and Clipboard History
- Send keystrokes to trigger for setSelectedText, getSelectedText, keyboard.type and others
- In the future, recording Macros, mouse actions, and more

## Submit From Live Data
> Some scenarios require setInterval or other "live data" utils. This means you can't use await on the arg/div/textarea/etc because await prevents the script from continuing on to start the setInterval.
```js
let intervalId = 0
div(md(`Click a value`)).then(async value => {
  clearInterval(intervalId)

  await div(md(value))
})

intervalId = setInterval(() => {
```

## Strict Mode
> strict is enabled by default and it forces the user to pick an item from the list, preventing them from entering their own text.
```js
// If the list is completely filtered, hitting enter does nothing.
let fruit = await arg(`You can only pick one`, [
  `Apple`,
  `Banana`,
  `Orange`,
])

// If the list is completely filtered, hitting enter sends whatever
```

## Quick Keys
> A quick key allows you to bind a single key to submit a prompt.
```js
//Type "y" or "n"
let confirm = await arg({
  placeholder: "Eat a taco?",
  hint: `[y]es/[n]o`,
})

console.log(confirm) //"y" or "n"
```

## Position a Widget on Screen
> You can control the size/position of each show window you create, but you'll need some info from the current screen (especially with a multi-monitor setup!) to be able to position the window where you want it:
```js
let width = 480
let height = 320

let { workArea } = await getActiveScreen()
let { x, y, width: workAreaWidth } = workArea

await widget(
  md(`
```

## Update on Input
> When you pass a function as the second argument of arg, you can take the current input and return a string. Kit.app will then render the results as HTML. The simplest example looks like this:
```js
await arg("Start typing", input => input)
```

## Clone Git Repos with degit
> We're developers. We clone project templates from github. degit is available on the global scope for exactly this scenario.
```js
let projectName = await arg("Name your project")
let targetDir = home("projects", projectName)

await degit(`https://github.com/sveltejs/template`).clone(
  targetDir
)

await edit(targetDir)
```

## View Logs
> When you use console.log() in a script, it writes the log out to a relative directory.
```sh
tail -f ~/.kenv/logs/my-script.log
```

## Save webpage as a PDF
> You can save any webpage as a PDF.
```js
// Name: Save news as PDF

import "@johnlindquist/kit"

const pdfResults = await getWebpageAsPdf('https://legiblenews.com');

await writeFile(home('news.pdf'), pdfResults);
```

## Take screenshot of webpage
> You can take a screenshot of any webpage.
```js
// Name: Take screenshot of news webpage

import "@johnlindquist/kit"

const screenshotResults = await getScreenshotFromWebpage('https://legiblenews.com', {
  screenshotOptions: { fullPage: true },
});
```

## Scrape content from a webpage
> You can scrape content from a webpage. The first time you run this, you will be prompted to install Playwright.
```js
// Name: Scrape John's pinned Github repositories

import "@johnlindquist/kit"

const items = await scrapeSelector(
  'https://github.com/johnlindquist',
  // CSS Selector to target elements
  '.pinned-item-list-item-content > div > a',
```

## Missing Something?
> This Guide constantly evolving. If you're missing something, suggest an edit to the docs or open an issue on GitHub.
